# 心理健康调试云平台技术备案

#### 用户角色设计
- ##### 1.超级管理员（superAdmin)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|_id|用户编号|**Long**|
|userName|用户名|**String**|
|password|密码|**String**|
|registerTime|注册时间|**Long**|
|company|所属单位|**String**|

- ##### 2.管理员/老师(admin)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|所属管理员|所属管理员Id|**Long**|
|其他字段同超级管理员|-|-|


- ##### 3.用户/学生/患者(user)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|_id|用户编号|**Long**|
|userName|用户名|**String**|
|password|密码|**String**|
|registerTime|注册时间|**Long**|
|company|所属单位|**String**|
|sex|性别|**int**|
|age|年龄|**int**|
|mobile|手机号/用户联系方式|**String**|
|photo|用户头像|**String-Url**|
|lastLoginTime|上次登录时间|**Long**|
|lastLoginAddress|上次登录地点|**Long**|
|loginEquiList|登录设备列表|**String[]**|
|adminId|所属管理员Id|**Long**|


#### 在线即时通讯
[技术备案地址](https://netease.im/im?from=bdjj2006y5594 "网易云信")

- ##### 1.文字消息
- ##### 2.语音消息
- ##### 3.多媒体文件消息(视频/图片/音频/文本)
- ##### 4.消息即时推送
- ##### 5.聊天记录存储在本地数据库


> 待更新 2020/05/27


> 更新于 2020/07/16

#### 功能模块

##### 基本所有模块数据都是直接导入数据库的，只需要查询接口。个别模块需要有添加数据接口，不需要修改和删除数据的接口

##### 一级模块：A.首页，B.沙盘，C.助眠，D.个人中心
##### 二级模块：E.冥想，F.心呼吸，G.番茄钟，H.助眠，I.心理电台，J.解忧商店，K.心理游戏，L.心理知识，M.VR放松，N.咨询，O.治愈音乐，P.呼吸训练，Q.减压训练，R.预约咨询，S.在线咨询,T.我的收藏，U.我的预约，V.咨询记录，W.关于，X.个人信息，Y.其他。

| 模块名|编号|模块等级|功能|
| --------- | -----:| -----:| -----:|
|**首页**|**A**|一级模块|a.获取轮播图，b.获取教师数据，c.获取新闻数据|
|**沙盘**|**B**|一级模块|a.获取沙具分类，b.根据分类获取沙具列表|
|**助眠**|**C**|一级模块|a.获取助眠音乐分类，b.根据音乐分类获取音乐列表|
|**个人中心**|**D**|一级模块|a.获取个人信息，b.修改个人信息|
|冥想|E|二级模块|a.获取冥想分类，b.根据冥想分类获取冥想列表，c.获取冥想详情数据|
|心呼吸|F|二级模块|a.获取心呼吸列表，b.获取心呼吸详情数据|
|番茄钟|G|二级模块|a.获取番茄钟列表，b.获取番茄钟详情数据|
|助眠|H|二级模块|跳转到一级模块|
|心理电台|I|二级模块|a.获取一条心理电台信息，b.上一条，下一条|
|解忧商店|J|二级模块|a.随机获取一条信息，b.发送一条信息|
|心理游戏|K|二级模块|待定|
|心理知识|L|二级模块|a.获取心理知识列表，b.获取信息知识详情|
|VR放松|M|二级模块|a.获取VR场景列表，b.获取详情|
|咨询|N|二级模块|a.在线咨询(即时聊天)|
|治愈音乐|O|二级模块|a.获取音乐列表，b.获取音乐详情|
|呼吸训练|P|二级模块|待定|
|减压训练|Q|二级模块|待定|
|预约咨询|R|二级模块|a.提交一条咨询|
|在线咨询|S|二级模块|跳转到在线咨询(即时聊天)|
|我的收藏|T|二级模块|a.获取收藏列表，b.获取收藏详情|
|我的预约|U|二级模块|a.获取R模块提交的预约列表，b.获取预约详情|
|咨询记录|V|二级模块|a.获取咨询记录，b.获取咨询记录详情|
|关于|W|二级模块|写死界面|
|个人信息|X|二级模块|a.获取个人信息，b.修改个人信息|
|其他|Y|二级模块|其他|


> 更新于 2020/09/03

### 接口需求（按模块）
##### 漂流瓶修改完善

- ##### 1.瓶子信息  driftBottle

| 字段名|描述|类型|
| --------- | -----:| -----:|
|_id|编号|**Long**|
|content|内容|**String**|
|userName|发送人姓名|**String**|
|userId|发送人ID|**Long**|
|replyList|回复列表|**Array**|

- ##### 2.回复列表 reply

| 字段名|描述|类型|
| --------- | -----:| -----:|
|_id|编号|**Long**|
|content|内容|**String**|
|userName|回复人姓名|**String**|
|userId|回复人ID|**Long**|

 ### 接口列表

- #### 1.扔出一个漂流瓶
	- ##### 用户ID
	- ##### 用户姓名
	- ##### 漂流瓶内容

- #### 2.检一个漂流瓶    (自动将这个漂流瓶加入 "我的瓶子")
	- ##### 用户ID
	- ##### 用户姓名

- #### 3.回复/不回复扔回海里 （自动将这个漂流瓶从 "我的瓶子"删除)
	- ##### 瓶子ID
	- ##### 用户ID
	- ##### 用户姓名
	- ##### 是否回复
	- ##### 回复内容(是否回复为TRUE才有数据)

- #### 4.我的瓶子 
	- ##### 用户ID
	- ##### 类型 0：全部 1：我扔的  2：我捡的 
###### tips:分为 "我扔的" "我捡的" 由我扔出的瓶子自动加入 "我扔的"分类 ，不可删除 。"我捡的"由接口二和接口三数据互相关联


> 更新于 2020/09/05

- #### 1.预约咨询
	- ##### 预约手机号
	- ##### 姓名
	- ##### 年龄
	- ##### 性别
	- ##### 单位/学校 非必填
	- ##### 身份证 非必填
	- ##### 预约原因 
	- ##### 预约时间 年/月/日 时：分

- #### 2.我的预约
	查询我提交的预约申请

> 更新于 2020/09/16

- #### 1.我的单位/学校信息
###### 获取用户设置的单位学校信息

- #### 2.用户设置心情
	- ##### 心情ID
###### 心情分为 激动/难过/愤怒/欢喜/忧愁/恐惧/无（默认）



