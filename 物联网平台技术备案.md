# 物联网平台技术备案


	
#### 实体设计(默认有增删改查接口)

- ##### 1.基础用户（User)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|_id|用户编号|**long**|
|userName|用户名|**String**|
|password|密码|**String**|
|registerTime|注册时间|**long**|
|appName|应用名称|**String**|
|sex|性别|**ENUM (WOMEN/MAN)**|
|company|所属单位|**String**|
|birthday|生日|**DATE (yyyy/MM/dd)**|
|age|年龄|**int (根据birthday推算)**|
|lastLoginTime|上次登录时间|**DATE (yyyy/MM/dd HH:mm:ss)**|

- ##### 2.使用历史（useHistory)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|modulName|模块名称|**String**|
|useTime|使用时间|**long**|
|userId|使用者ID|**long**|
|appName|应用名称|**String**|

- ##### 3.设备（device)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|DeviceId|设备ID(设备的唯一编号)|**String**|
|appName|应用名称|**String**|
|currLoginUser|当前登录用户信息|**User**|
|currUseDesc|当前使用描述|**String**|
|on_off_status|开关机状态|**String**|


- ##### 4.报告（Report)

| 字段名|描述|类型|
| --------- | -----:| -----:|
|待确定|待确定|**待确定**|
	
## 接口需求

- #### 1.用户注册
  ##### 当用户在以上需要进行互联的设备进行注册功能时，将调用该接口进行用户注册，用户注册的信息将不会只存储在服务器端，会在本地数据库存储用户名和密码。
  
  - ##### 传参
  
  ```
	  {
		"userName":"张三",
		"password":"123456",
		"account":"15111475403",
		"sex":"WOMEN",
		"appName":"智能呐喊互动宣泄仪",
		"birthday":"1999/12/10",
		"company":"北京清华大学",
		...后续可能添加
	  }
  ```

- #### 2.用户登录
	##### 用户使用登录功能时，会携带设备信息，用户登录时需要处理以下逻辑
	- 1.修改设备信息，将设备信息设置为在线，设备登录人设置为登录用户
	- 2.添加用户登录信息到用户登录表

	- ##### 传参

	```
	  {
		"userName":"张三",
		"password":"123456",
		"appName":"智能呐喊互动宣泄仪"
		"deviceInfo": {
			"DeviceId":"xxxx-xxxx-xxxx-xxxx",
			"androidVersion":"Android 7.1.2,level 25",
			"deviceModel":"SIMULATOR ANDROID",
			"deviceBrand":"ALLDOCUBE"
		}
		...后续可能添加
	  }
	```


- #### 3.修改设备当前状态

	- ##### 传参

	```
	  {
		"currUseDesc":"正在使用调节训练-百合花开",
		"on_off_status":"on",
		"appName":"智能呐喊互动宣泄仪"
		"DeviceId":"xxxx-xxxx-xxxx-xxxx"
		...后续可能添加
	  }
	```


